<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½ä»£ç†è½¬æ¢å·¥å…· - æ”¯æŒ Quantumult X</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .converter-section {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            min-height: 700px;
        }
        
        .section {
            padding: 25px;
            display: flex;
            flex-direction: column;
        }
        
        .section:not(:last-child) {
            border-right: 2px solid #ecf0f1;
        }
        
        .section-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .format-selector {
            margin-bottom: 15px;
        }
        
        .format-selector select {
            width: 100%;
            padding: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }
        
        .text-area {
            flex: 1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            padding: 12px;
            resize: none;
            outline: none;
            transition: border-color 0.3s;
        }
        
        .text-area:focus {
            border-color: #3498db;
        }
        
        .output-area {
            background: #f8f9fa;
            border-color: #27ae60;
        }
        
        .theos-area {
            background: #fff5f5;
            border-color: #e74c3c;
        }
        
        .quantumult-area {
            background: #f0f8ff;
            border-color: #3498db;
        }
        
        .controls {
            margin: 15px 0;
            text-align: center;
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            margin: 0 3px;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-copy {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        }
        
        .btn-clear {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        .btn-generate {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }
        
        .status {
            margin-top: 10px;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            font-size: 12px;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .auto-generate-info {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 15px;
            font-size: 12px;
            color: #0c5460;
        }
        
        @media (max-width: 1400px) {
            .converter-section {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 900px) {
            .converter-section {
                grid-template-columns: 1fr;
            }
            
            .section:not(:last-child) {
                border-right: none;
                border-bottom: 2px solid #ecf0f1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ æ™ºèƒ½ä»£ç†è½¬æ¢å·¥å…·</h1>
            <p>ä»£ç†é…ç½®è½¬æ¢ + è‡ªåŠ¨ç”Ÿæˆ Theos Hook + Quantumult X é‡å†™è„šæœ¬</p>
        </div>
        
        <div class="converter-section">
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="section">
                <div class="section-title">
                    ğŸ“¥ è¾“å…¥é…ç½®
                </div>
                
                <div class="format-selector">
                    <select id="inputFormat">
                        <option value="storm">httpcatcher æ ¼å¼</option>
                        <option value="spider">Spider Proxy æ ¼å¼</option>
                    </select>
                </div>
                
                <textarea id="inputArea" class="text-area" placeholder="è¯·ç²˜è´´æ‚¨çš„é…ç½® JSON..."></textarea>
                
                <div class="controls">
                    <button class="btn" onclick="convertAndGenerate()">ğŸ”„ å…¨éƒ¨è½¬æ¢</button>
                    <button class="btn btn-clear" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©º</button>
                </div>
            </div>
            
            <!-- è½¬æ¢è¾“å‡ºåŒºåŸŸ -->
            <div class="section">
                <div class="section-title">
                    ğŸ“¤ è½¬æ¢ç»“æœ
                </div>
                
                <div class="format-selector">
                    <select id="outputFormat">
                        <option value="spider">Spider Proxy æ ¼å¼</option>
                        <option value="storm">httpcatcher æ ¼å¼</option>
                    </select>
                </div>
                
                <textarea id="outputArea" class="text-area output-area" readonly placeholder="è½¬æ¢ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
                
                <div class="controls">
                    <button class="btn btn-copy" onclick="copyOutput()">ğŸ“‹ å¤åˆ¶é…ç½®</button>
                </div>
                
                <div id="status" class="status" style="display: none;"></div>
            </div>
            
            <!-- Theos Hook ç”ŸæˆåŒºåŸŸ -->
            <div class="section">
                <div class="section-title">
                    ğŸ”§ Theos Hook è„šæœ¬
                </div>
                
                <div class="auto-generate-info">
                    ğŸ’¡ <strong>iOSè¶Šç‹±è®¾å¤‡:</strong> è‡ªåŠ¨ç”ŸæˆTheos Hookè„šæœ¬ï¼Œç”¨äºiOSåº”ç”¨æ³¨å…¥
                </div>
                
                <textarea id="theosArea" class="text-area theos-area" readonly placeholder="Theos Hookè„šæœ¬å°†è‡ªåŠ¨ç”Ÿæˆ..."></textarea>
                
                <div class="controls">
                    <button class="btn btn-copy" onclick="copyTheos()">ğŸ“‹ å¤åˆ¶Hook</button>
                    <button class="btn btn-generate" onclick="regenerateTheos()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
                </div>
                
                <div id="theosStatus" class="status" style="display: none;"></div>
            </div>
            
            <!-- Quantumult X é‡å†™è„šæœ¬åŒºåŸŸ -->
            <div class="section">
                <div class="section-title">
                    ğŸ“± Quantumult X è„šæœ¬
                </div>
                
                <div class="auto-generate-info">
                    ğŸ’¡ <strong>å…è¶Šç‹±è®¾å¤‡:</strong> è‡ªåŠ¨ç”ŸæˆQuantumult Xé‡å†™è„šæœ¬ï¼Œæ— éœ€è¶Šç‹±
                </div>
                
                <textarea id="quantumultArea" class="text-area quantumult-area" readonly placeholder="Quantumult Xé‡å†™è„šæœ¬å°†è‡ªåŠ¨ç”Ÿæˆ..."></textarea>
                
                <div class="controls">
                    <button class="btn btn-copy" onclick="copyQuantumult()">ğŸ“‹ å¤åˆ¶è„šæœ¬</button>
                    <button class="btn btn-generate" onclick="regenerateQuantumult()">ğŸ”„ é‡æ–°ç”Ÿæˆ</button>
                </div>
                
                <div id="quantumultStatus" class="status" style="display: none;"></div>
            </div>
        </div>
    </div>

    <script>
        // è‡ªåŠ¨åˆ‡æ¢è¾“å‡ºæ ¼å¼
        document.getElementById('inputFormat').addEventListener('change', function() {
            const outputFormat = document.getElementById('outputFormat');
            if (this.value === 'storm') {
                outputFormat.value = 'spider';
            } else {
                outputFormat.value = 'storm';
            }
        });

        function showStatus(message, isError = false, elementId = 'status') {
            const status = document.getElementById(elementId);
            status.textContent = message;
            status.className = `status ${isError ? 'error' : 'success'}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }

        function convertAndGenerate() {
            // å…ˆè¿›è¡Œä»£ç†é…ç½®è½¬æ¢
            const success = convertConfig();
            if (success) {
                // è½¬æ¢æˆåŠŸåè‡ªåŠ¨ç”ŸæˆHookè„šæœ¬å’ŒQuantumult Xè„šæœ¬
                generateTheosFromRules();
                generateQuantumultFromRules();
            }
        }

        function convertConfig() {
            const inputArea = document.getElementById('inputArea');
            const outputArea = document.getElementById('outputArea');
            const inputFormat = document.getElementById('inputFormat').value;
            const outputFormat = document.getElementById('outputFormat').value;
            
            try {
                const inputConfig = JSON.parse(inputArea.value);
                let outputConfig;
                
                if (inputFormat === 'storm' && outputFormat === 'spider') {
                    outputConfig = stormToSpider(inputConfig);
                } else if (inputFormat === 'spider' && outputFormat === 'storm') {
                    outputConfig = spiderToStorm(inputConfig);
                } else {
                    throw new Error('è¯·é€‰æ‹©ä¸åŒçš„è¾“å…¥è¾“å‡ºæ ¼å¼');
                }
                
                outputArea.value = JSON.stringify(outputConfig, null, 2);
                showStatus('âœ… è½¬æ¢æˆåŠŸï¼');
                return true;
                
            } catch (error) {
                showStatus(`âŒ è½¬æ¢å¤±è´¥: ${error.message}`, true);
                outputArea.value = '';
                return false;
            }
        }

        function generateTheosFromRules() {
            try {
                const inputArea = document.getElementById('inputArea');
                const inputFormat = document.getElementById('inputFormat').value;
                const inputConfig = JSON.parse(inputArea.value);
                
                const extractedFields = extractFieldsFromConfig(inputConfig, inputFormat);
                
                if (extractedFields.length === 0) {
                    showStatus('âš ï¸ æœªæ£€æµ‹åˆ°JSONå­—æ®µä¿®æ”¹è§„åˆ™', true, 'theosStatus');
                    document.getElementById('theosArea').value = '// æœªæ£€æµ‹åˆ°å¯è½¬æ¢çš„JSONå­—æ®µä¿®æ”¹è§„åˆ™\n// è¯·ç¡®ä¿é…ç½®ä¸­åŒ…å«JSONå­—æ®µçš„ä¿®æ”¹æ“ä½œ';
                    return;
                }
                
                const hookScript = generateTheosHookScript(extractedFields, inputConfig.name || inputConfig.title || 'AutoGenerated');
                document.getElementById('theosArea').value = hookScript;
                
                showStatus(`âœ… æˆåŠŸç”ŸæˆHookè„šæœ¬ï¼æ£€æµ‹åˆ° ${extractedFields.length} ä¸ªå­—æ®µä¿®æ”¹`, false, 'theosStatus');
                
            } catch (error) {
                showStatus(`âŒ Hookç”Ÿæˆå¤±è´¥: ${error.message}`, true, 'theosStatus');
                document.getElementById('theosArea').value = '';
            }
        }

        function generateQuantumultFromRules() {
            try {
                const inputArea = document.getElementById('inputArea');
                const inputFormat = document.getElementById('inputFormat').value;
                const inputConfig = JSON.parse(inputArea.value);
                
                const extractedFields = extractFieldsFromConfig(inputConfig, inputFormat);
                
                if (extractedFields.length === 0) {
                    showStatus('âš ï¸ æœªæ£€æµ‹åˆ°JSONå­—æ®µä¿®æ”¹è§„åˆ™', true, 'quantumultStatus');
                    document.getElementById('quantumultArea').value = '// æœªæ£€æµ‹åˆ°å¯è½¬æ¢çš„JSONå­—æ®µä¿®æ”¹è§„åˆ™\n// è¯·ç¡®ä¿é…ç½®ä¸­åŒ…å«JSONå­—æ®µçš„ä¿®æ”¹æ“ä½œ';
                    return;
                }
                
                const quantumultScript = generateQuantumultScript(extractedFields, inputConfig);
                document.getElementById('quantumultArea').value = quantumultScript;
                
                showStatus(`âœ… æˆåŠŸç”ŸæˆQuantumult Xè„šæœ¬ï¼æ£€æµ‹åˆ° ${extractedFields.length} ä¸ªå­—æ®µä¿®æ”¹`, false, 'quantumultStatus');
                
            } catch (error) {
                showStatus(`âŒ Quantumult Xè„šæœ¬ç”Ÿæˆå¤±è´¥: ${error.message}`, true, 'quantumultStatus');
                document.getElementById('quantumultArea').value = '';
            }
        }

        function extractFieldsFromConfig(config, format) {
            const fields = [];
            const fieldMap = new Map();
            let rules = [];
            
            if (format === 'storm') {
                rules = config.rules || [];
            } else {
                // Spideræ ¼å¼ï¼Œä»pathesä¸­æå–rules
                config.pathes?.forEach(path => {
                    rules = rules.concat(path.rules || []);
                });
            }
            
            rules.forEach(rule => {
                let matchValue, value;
                
                if (format === 'storm') {
                    matchValue = rule.matchValue;
                    value = rule.value;
                } else {
                    // Spideræ ¼å¼
                    matchValue = rule.key;
                    value = rule.value;
                }
                
                // è§£æJSONå­—æ®µä¿®æ”¹è§„åˆ™
                const fieldMatch = matchValue?.match(/"([^"]+)":\s*[\\]?[wd]+/);
                const valueMatch = value?.match(/"([^"]+)":\s*(.+)/);
                
                if (fieldMatch && valueMatch) {
                    const fieldName = fieldMatch[1];
                    const fieldValue = valueMatch[2];
                    
                    // é¿å…é‡å¤å­—æ®µ
                    if (!fieldMap.has(fieldName)) {
                        const parsedField = parseFieldValue(fieldName, fieldValue);
                        if (parsedField) {
                            fields.push(parsedField);
                            fieldMap.set(fieldName, true);
                        }
                    }
                }
            });
            
            return fields;
        }

        function parseFieldValue(fieldName, valueStr) {
            // æ¸…ç†å€¼å­—ç¬¦ä¸²
            let cleanValue = valueStr.trim();
            
            // æ£€æµ‹æ•°å­—
            if (/^\d+$/.test(cleanValue)) {
                return {
                    name: fieldName,
                    value: cleanValue,
                    type: 'number'
                };
            }
            
            // æ£€æµ‹å¸ƒå°”å€¼
            if (cleanValue === '1' || cleanValue === 'true') {
                return {
                    name: fieldName,
                    value: 'true',
                    type: 'boolean'
                };
            }
            
            if (cleanValue === '0' || cleanValue === 'false') {
                return {
                    name: fieldName,
                    value: 'false',
                    type: 'boolean'
                };
            }
            
            // æ£€æµ‹å­—ç¬¦ä¸²
            const stringMatch = cleanValue.match(/^"([^"]*)"$/);
            if (stringMatch) {
                return {
                    name: fieldName,
                    value: stringMatch[1],
                    type: 'string'
                };
            }
            
            // é»˜è®¤ä½œä¸ºå­—ç¬¦ä¸²å¤„ç†
            return {
                name: fieldName,
                value: cleanValue.replace(/"/g, ''),
                type: 'string'
            };
        }

        function generateTheosHookScript(fields, projectName) {
            const inputArea = document.getElementById('inputArea');
            const inputFormat = document.getElementById('inputFormat').value;
            const inputConfig = JSON.parse(inputArea.value);
            
            // æå–åŸŸåä¿¡æ¯
            let domains = [];
            if (inputFormat === 'storm') {
                domains = inputConfig.locations?.map(loc => `${loc.scheme || 'https'}://${loc.host}`) || [];
            } else {
                domains = inputConfig.pathes?.map(path => `${path.schema || 'https'}://${path.domain}`) || [];
            }
            
            let script = `#import <Foundation/Foundation.h>\n#import <objc/runtime.h>\n\n`;
            script += `// ${projectName} - Auto Generated Hook Script\n`;
            script += `// Generated by Smart Proxy Converter\n`;
            script += `// Detected ${fields.length} field modifications\n\n`;

            script += `%hook SessionDelegate\n\n`;
            script += `- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)task didReceiveData:(NSData *)data {\n`;
            
            if (domains.length > 0) {
                domains.forEach((domain, index) => {
                    script += `    ${index === 0 ? 'if' : 'else if'} ([task.currentRequest.URL.absoluteString containsString:@"${domain}"]) {\n`;
                    script += `        NSString *body = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];\n        \n`;
                    script += `        // æ›¿æ¢ä»£ç å°†æ’å…¥åˆ°è¿™é‡Œ\n`;
                    
                    fields.forEach(field => {
                        let replacement;
                        switch (field.type) {
                            case 'string':
                                replacement = `"${field.name}":"${field.value}"`;
                                break;
                            case 'boolean':
                                replacement = `"${field.name}":${field.value === 'true' ? '1' : '0'}`;
                                break;
                            case 'number':
                            default:
                                replacement = `"${field.name}":${field.value}`;
                                break;
                        }
                        script += `        body = [body stringByReplacingOccurrencesOfString:@"\\"${field.name}\\":\\\\d+" withString:@"${replacement}" options:NSRegularExpressionSearch range:NSMakeRange(0, body.length)];\n`;
                    });
                    
                    script += `        \n        NSData *newData = [body dataUsingEncoding:NSUTF8StringEncoding];\n`;
                    script += `        data = newData;\n`;
                    script += `    }\n`;
                });
            } else {
                // å¦‚æœæ²¡æœ‰åŸŸåä¿¡æ¯ï¼Œç”Ÿæˆé€šç”¨ç‰ˆæœ¬
                script += `    if ([task.currentRequest.URL.absoluteString containsString:@"api"]) {\n`;
                script += `        NSString *body = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];\n        \n`;
                script += `        // æ›¿æ¢ä»£ç å°†æ’å…¥åˆ°è¿™é‡Œ\n`;
                
                fields.forEach(field => {
                    let replacement;
                    switch (field.type) {
                        case 'string':
                            replacement = `"${field.name}":"${field.value}"`;
                            break;
                        case 'boolean':
                            replacement = `"${field.name}":${field.value === 'true' ? '1' : '0'}`;
                            break;
                        case 'number':
                        default:
                            replacement = `"${field.name}":${field.value}`;
                            break;
                    }
                    script += `        body = [body stringByReplacingOccurrencesOfString:@"\\"${field.name}\\":\\\\d+" withString:@"${replacement}" options:NSRegularExpressionSearch range:NSMakeRange(0, body.length)];\n`;
                });
                
                script += `        \n        NSData *newData = [body dataUsingEncoding:NSUTF8StringEncoding];\n`;
                script += `        data = newData;\n`;
                script += `    }\n`;
            }
            
            script += `    \n    %orig(session, task, data);\n`;
            script += `}\n\n`;
            script += `%end\n\n`;
            script += `%ctor {\n`;
            script += `    %init(SessionDelegate = objc_getClass("Alamofire.SessionDelegate"));\n`;
            script += `}`;

            return script;
        }

        function generateQuantumultScript(fields, config) {
            const projectName = config.name || config.title || 'AutoGenerated';
            
            let script = `// ${projectName} - Quantumult X Rewrite Script\n`;
            script += `// Generated by Smart Proxy Converter\n`;
            script += `// Detected ${fields.length} field modifications\n\n`;
            
            script += `// ä½¿ç”¨æ–¹æ³•:\n`;
            script += `// 1. å°†æ­¤è„šæœ¬ä¿å­˜ä¸º .js æ–‡ä»¶\n`;
            script += `// 2. åœ¨ Quantumult X é…ç½®ä¸­æ·»åŠ é‡å†™è§„åˆ™:\n`;
            
            // ç”Ÿæˆé‡å†™è§„åˆ™ç¤ºä¾‹
            if (config.pathes) {
                config.pathes.forEach(path => {
                    const domain = path.domain || 'example.com';
                    const pathStr = path.path || '/api';
                    script += `//    ^https?://${domain}${pathStr} url script-response-body script.js\n`;
                });
            } else if (config.locations) {
                config.locations.forEach(location => {
                    const host = location.host || 'example.com';
                    const path = location.path || '/api';
                    script += `//    ^https?://${host}${path} url script-response-body script.js\n`;
                });
            }
            
            script += `\n`;
            script += `let body = $response.body;\n`;
            script += `let obj = JSON.parse(body);\n\n`;
            script += `// Auto-detected field modifications\n`;
            
            fields.forEach(field => {
                let jsValue;
                switch (field.type) {
                    case 'string':
                        jsValue = `"${field.value}"`;
                        break;
                    case 'boolean':
                        jsValue = field.value === 'true' ? 'true' : 'false';
                        break;
                    case 'number':
                    default:
                        jsValue = field.value;
                        break;
                }
                script += `if (obj.${field.name} !== undefined) obj.${field.name} = ${jsValue};\n`;
            });
            
            script += `\n`;
            script += `console.log("[${projectName}] Modified JSON response with ${fields.length} field(s)");\n`;
            script += `$done({body: JSON.stringify(obj)});`;
            
            return script;
        }

        function regenerateTheos() {
            generateTheosFromRules();
        }

        function regenerateQuantumult() {
            generateQuantumultFromRules();
        }

        // ä»£ç†é…ç½®è½¬æ¢å‡½æ•°
        function stormToSpider(stormConfig) {
            const spiderConfig = {
                title: stormConfig.name || "è½¬æ¢é…ç½®",
                pathes: []
            };

            const locationGroups = {};
            
            stormConfig.locations.forEach(location => {
                const key = `${location.host}${location.path}`;
                if (!locationGroups[key]) {
                    locationGroups[key] = {
                        location: location,
                        rules: []
                    };
                }
            });

            stormConfig.rules.forEach(rule => {
                Object.keys(locationGroups).forEach(key => {
                    locationGroups[key].rules.push({
                        key: rule.matchValue,
                        action: "MBody",
                        type: "Response",
                        remote: 0,
                        value: rule.value
                    });
                });
            });

            Object.values(locationGroups).forEach(group => {
                const location = group.location;
                spiderConfig.pathes.push({
                    method: location.method || "ALL",
                    query: location.query || "",
                    rules: group.rules,
                    domain: location.host || "",
                    mode: 0,
                    schema: location.schema || "https",
                    path: location.path || ""
                });
            });

            return spiderConfig;
        }

        function spiderToStorm(spiderConfig) {
            const stormConfig = {
                rules: [],
                enabled: true,
                name: spiderConfig.title || "è½¬æ¢é…ç½®",
                description: "",
                locations: []
            };

            spiderConfig.pathes.forEach(path => {
                stormConfig.locations.push({
                    method: path.method === "ALL" ? "GET" : path.method,
                    scheme: path.schema || "https",
                    enabled: true,
                    port: path.schema === "https" ? 443 : 80,
                    query: path.query || "",
                    host: path.domain || "",
                    path: path.path || ""
                });

                path.rules.forEach(rule => {
                    stormConfig.rules.push({
                        action: "body",
                        matchField: "",
                        field: "",
                        value: rule.value,
                        matchValue: rule.key,
                        destination: "response",
                        isRegex: true
                    });
                });
            });

            return stormConfig;
        }

        function copyOutput() {
            const outputArea = document.getElementById('outputArea');
            outputArea.select();
            document.execCommand('copy');
            showStatus('ğŸ“‹ å·²å¤åˆ¶é…ç½®åˆ°å‰ªè´´æ¿ï¼');
        }

        function copyTheos() {
            const theosArea = document.getElementById('theosArea');
            theosArea.select();
            document.execCommand('copy');
            showStatus('ğŸ“‹ å·²å¤åˆ¶Hookè„šæœ¬åˆ°å‰ªè´´æ¿ï¼', false, 'theosStatus');
        }

        function copyQuantumult() {
            const quantumultArea = document.getElementById('quantumultArea');
            quantumultArea.select();
            document.execCommand('copy');
            showStatus('ğŸ“‹ å·²å¤åˆ¶Quantumult Xè„šæœ¬åˆ°å‰ªè´´æ¿ï¼', false, 'quantumultStatus');
        }

        function clearAll() {
            document.getElementById('inputArea').value = '';
            document.getElementById('outputArea').value = '';
            document.getElementById('theosArea').value = '';
            document.getElementById('quantumultArea').value = '';
            showStatus('ğŸ—‘ï¸ å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹');
            showStatus('ğŸ—‘ï¸ å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', false, 'theosStatus');
            showStatus('ğŸ—‘ï¸ å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹', false, 'quantumultStatus');
        }

        // ç¤ºä¾‹æ•°æ®
        window.addEventListener('load', function() {
            const exampleStorm = {
                "rules": [
                    {
                        "action": "body",
                        "matchField": "",
                        "field": "",
                        "value": "\"coins\":999999",
                        "matchValue": "\"coins\":\\d+",
                        "destination": "response",
                        "isRegex": true
                    },
                    {
                        "action": "body",
                        "matchField": "",
                        "field": "",
                        "value": "\"vip\":1",
                        "matchValue": "\"vip\":\\d+",
                        "destination": "response",
                        "isRegex": true
                    }
                ],
                "enabled": true,
                "name": "æ¸¸æˆç ´è§£ç¤ºä¾‹",
                "description": "",
                "locations": [
                    {
                        "method": "GET",
                        "scheme": "https",
                        "enabled": true,
                        "port": 443,
                        "query": "",
                        "host": "api.game.com",
                        "path": "/user/info"
                    }
                ]
            };
            
            document.getElementById('inputArea').placeholder = 
                `è¯·ç²˜è´´é…ç½® JSONï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è¯†åˆ«å¹¶ç”ŸæˆHookè„šæœ¬å’ŒQuantumult Xè„šæœ¬\n\nç¤ºä¾‹é…ç½®ï¼š\n${JSON.stringify(exampleStorm, null, 2)}`;
        });
    </script>
</body>
</html>
